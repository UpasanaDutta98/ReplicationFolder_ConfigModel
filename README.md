## Replication Code for sampling graphs from the Configuration model

This Github repository contains files for replicating the results of the manuscript: https://arxiv.org/abs/2105.12120. These files are meant only for replication purpose. If you want to apply these methods on your own data, please use the [ConfigModel_MCMC](https://upasanadutta98.github.io/ConfigModel_MCMC/) Python package instead.

### Set-up

First, create a new virtual environment with Python 3.8 and activate it.

```
conda create --name my_rep_env python=3.8
conda activate my_rep_env
```

The packages required for the replication code to run are listed in requirements.txt. Install them using the following command:

`pip install -r requirements.txt`

The [arch module](https://pypi.org/project/arch/) uses the [OpenBLAS module](https://www.openblas.net/) for estimating the model parameters for the DFGLS test. Since `OpenBLAS` uses multithreading on its own, it is recommended to limit the number of threads before you start Python, especially if running this package on a high-computing cluster.

For example, if you are using Jupyter Notebook, execute the following commands in your terminal before launching Jupyter.

```
$ export MKL_NUM_THREADS=1
$ export OPENBLAS_NUM_THREADS=1
$ jupyter notebook
```

Or if you are running any script (for example, test.py) from your terminal, you may execute the following commands.

```
$ export MKL_NUM_THREADS=1
$ export OPENBLAS_NUM_THREADS=1
$ python test.py
```

This will limit the multithreading to a single thread. You can choose other number of threads e.g., 2, 4, etc, depending on the number of availabile CPU cores. On clusters it is usually recommended to limit it to 1 thread per process.

### Instructions for replications

The code has been partitioned into sub-folders [Methods](https://github.com/UpasanaDutta98/ReplicationFolder_ConfigModel/tree/main/Code/Methods), [Applications](https://github.com/UpasanaDutta98/ReplicationFolder_ConfigModel/tree/main/Code/Applications), and [Appendix](https://github.com/UpasanaDutta98/ReplicationFolder_ConfigModel/tree/main/Code/Appendix). Please read the Readme files in each sub-folder for instructions on how to run the code. Note that both the python scripts and the notebooks are numbered since some files depend on the results generated by running the others first.

### Data

All the 509 empirical networks have been provided in the [NetworkRepository](https://github.com/UpasanaDutta98/ReplicationFolder_ConfigModel/tree/main/NetworkRepository) folder. There are 4 sub-folders, each containing edge-lists of networks from the corresponding graph-space (depending on whether loops or multi-edges can exist or not). 
